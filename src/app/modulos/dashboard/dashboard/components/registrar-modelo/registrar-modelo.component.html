
<form [formGroup]="formulario">
  <p-accordion
    class="w-full"
    expandIcon="pi pi-plus"
    collapseIcon="pi pi-minus"
    [activeIndex]="0"
  >
    <p-accordionTab>
      <ng-template pTemplate="header">
        <span class="flex align-items-center gap-2 w-full">
          <span class="font-bold white-space-nowrap"> Información básica </span>
        </span>
      </ng-template>
      <div class="grid flex-wrap">
        <div class="col-3">
          <div class="border-round-sm font-bold">
            <div class="flex flex-column gap-2">
              <label for="username">Nombre </label>
              <input
                pInputText
                id="username"
                formControlName="nombre"
                placeholder="Nombre"
                aria-describedby="username-help"
              />
              @if(formulario.get('nombre')?.touched &&
              formulario.get('nombre')?.hasError('required')){
              <small id="username-help" class="text-danger">
                El campo es requerido.
              </small>
              }
            </div>
          </div>
        </div>
        <div class="col-3">
          <div class="border-round-sm font-bold">
            <div class="flex flex-column gap-2">
              <label for="username">Email</label>
              <input
                pInputText
                id="username"
                formControlName="email"
                placeholder="Email"
                aria-describedby="username-help"
              />
              @if(formulario.get('email')?.touched &&
              formulario.get('email')?.hasError('required')){
              <small id="username-help" class="text-danger">
                El campo es requerido.
              </small>
              }
            </div>
          </div>
        </div>
        <div class="col-3">
          <div class="border-round-sm font-bold">
            <div class="flex flex-column gap-2">
              <label for="username">Edad</label>
              <input
                pInputText
                id="username"
                formControlName="edad"
                placeholder="Edad"
                aria-describedby="username-help"
              />
              @if(formulario.get('edad')?.touched &&
              formulario.get('edad')?.hasError('required')){
              <small id="username-help" class="text-danger">
                El campo es requerido.
              </small>
              }
            </div>
          </div>
        </div>
        <div class="col-6">
          <div class="border-round-sm font-bold">
            <div class="flex flex-column gap-2">
              <p-fileUpload
                url="https://www.primefaces.org/cdn/api/upload.php"
                [multiple]="true"
                accept="image/*"
                (onSelect)="onUpload($event)"
                maxFileSize="1000000"
              >
              </p-fileUpload>
              @if(formulario.get('foto')?.touched &&
              formulario.get('foto')?.hasError('required')){
              <small id="username-help" class="text-danger">
                El campo es requerido.
              </small>
              }
            </div>
          </div>
        </div>
      </div>
    </p-accordionTab>
    <p-accordionTab>
      <ng-template pTemplate="header">
        <span class="flex align-items-center gap-2 w-full">
          <span class="font-bold white-space-nowrap">Conocimientos </span>
        </span>
      </ng-template>

      <div class="flex">
        <div class="col-3">
          <div class="border-round-sm font-bold">
            <div class="flex flex-column gap-2">
              <label for="username">Conocimiento </label>
              <input
                pInputText
                id="username"
                formControlName="conocimiento"
                placeholder="Nuevo conocimiento"
                aria-describedby="username-help"
              />
              @if(formulario.get('habilidad')?.touched &&
              formulario.get('habilidad')?.hasError('required')){
              <small id="username-help" class="text-danger">
                El campo es requerido.
              </small>
              }
            </div>
          </div>
        </div>
        <div class="col-3">
          <div class="border-round-sm font-bold">
            <div class="flex flex-column gap-2">
              <label for="username">Descripción </label>

              <textarea rows="5" cols="50" formControlName="descripcionConocimiento"  pInputTextarea> </textarea>

              @if(formulario.get('conocimiento')?.touched &&
              formulario.get('conocimiento')?.hasError('required')){
              <small id="username-help" class="text-danger">
                El campo es requerido.
              </small>
              }
            </div>
          </div>
        </div>
        <div class="col-6">
          <p-table
            [value]="conocimientos"
            [tableStyle]="{ 'min-width': '50rem' }"
          >
            <ng-template pTemplate="header">
              <tr>
                <th>Conocimiento</th>
                <th>Descripción</th>
              </tr>
            </ng-template>
            <ng-template pTemplate="body" let-conocimientos>
              <tr>
                <td>{{ conocimientos.nombre }}</td>
                <td>{{ conocimientos.descripcion }}</td>
              </tr>
            </ng-template>
          </p-table>
        </div>
      </div>
      <div class="grid flex-wrap">
        <div class="flex col- justify-content-end">
          <p-button
            label="Agregar conocimiento"
            icon="pi pi-plus"
            [rounded]="true"
            severity="primary"
            (onClick)="agregarConocimiento()"
          />
        </div>
      </div>
    </p-accordionTab>
    <p-accordionTab>
      <ng-template pTemplate="header">
        <span class="flex align-items-center gap-2 w-full">
          <span class="font-bold white-space-nowrap">Habilidades </span>
        </span>
      </ng-template>

      <div class="flex">
        <div class="col-3">
          <div class="border-round-sm font-bold">
            <div class="flex flex-column gap-2">
              <label for="username">Habilidad </label>
              <input
                pInputText
                id="username"
                formControlName="habilidad"
                placeholder="Nueva habilidad"
                aria-describedby="username-help"
              />
              @if(formulario.get('habilidad')?.touched &&
              formulario.get('habilidad')?.hasError('required')){
              <small id="username-help" class="text-danger">
                El campo es requerido.
              </small>
              }
            </div>
          </div>
        </div>
        <div class="col-3">
          <div class="border-round-sm font-bold">
            <div class="flex flex-column gap-2">
              <label for="username">Descripción </label>

              <textarea rows="5" cols="50"  formControlName="descripcionHabidad"  pInputTextarea> </textarea>

              @if(formulario.get('conocimiento')?.touched &&
              formulario.get('conocimiento')?.hasError('required')){
              <small id="username-help" class="text-danger">
                El campo es requerido.
              </small>
              }
            </div>
          </div>
        </div>
        <div class="col-6">
          <p-table
            [value]="habilidades"
            [tableStyle]="{ 'min-width': '50rem' }"
          >
            <ng-template pTemplate="header">
              <tr>
                <th>habilidad</th>
                <th>Descripción</th>
              </tr>
            </ng-template>
            <ng-template pTemplate="body" let-habilidades>
              <tr>
                <td>{{ habilidades.nombre }}</td>
                <td>{{ habilidades.descripcion }}</td>
              </tr>
            </ng-template>
          </p-table>
        </div>
      </div>
      <div class="grid flex-wrap">
        <div class="flex col- justify-content-end">
          <p-button
            label="Agregar habilidad"
            icon="pi pi-plus"
            [rounded]="true"
            (onClick)="agregarHabilidad()"
            severity="primary"
          />
        </div>
      </div>
    </p-accordionTab>
    <div class="flex justify-content-end gap-2 mt-4">
      <p-button
        label="Cancelar"
        icon="pi pi-times"
        [rounded]="true"
        severity="secondary"
      />
      <p-button
        label="Guardar "
        icon="pi pi-save"
        [rounded]="true"
        severity="success"
        (onClick)="guardar()"   
      />
    </div>
  </p-accordion>
</form>
<p-toast></p-toast>